<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head>
  <meta charset="utf-8" />

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<body>
<header th:insert="header.html"></header>
<div layout:fragment="content">
  <div class="container">
    <div class="py-5 text-center">
      <h2>스토어 정보 수정</h2>
    </div>
    <form>
      <ul>
        <li>스토어명 <input type="text" name="name"  th:text="${store.name}"/></li>
        <li>홈페이지 주소 <input type="text" name="url" th:text="${store.url}"/></li>
        <li>사업자 등록 번호 <input type="text" name="businessLicenseNumber" th:text="${store.businessLicenseNumber}"/></li>
        <li>이메일 <input type="email" name="email" th:text="${store.email}"/></li>
        <li>운영 시작 시간 <input type="time" name="operationStartTime" th:text="${store.operationStartTime}"/></li>
        <li>운영 종료 시간 <input type="time" name="operationEndTime" th:text="${store.operationEndTime}"/></li>
        <li>점심 시작 시간 <input type="time" name="lunchStartTime" th:text="${store.lunchStartTime}"></span>/></li>
        <li>점심 종료 시간 <input type="time" name="lunchEndTime" th:text="${store.lunchEndTime}"/></li>
        <li>휴일 <input type="text" name="closedDay" th:text="${store.closedDay}"/></li>
        <li>업체 법인 명 <input type="text" name="companyCorporationName" th:text="${store.companyCorporationName}"/></li>
        <li>대표자명 <input type="text" name="representativeName" th:text="${store.representativeName}"/></li>
        <li>사업장 소재지 <input type="text" name="businessLocation" th:text="${store.businessLocation}"/></li>
        <li>고객센터 번호 <input type="text" name="customerServiceNumber" th:text="${store.customerServiceNumber}"/></li>
      </ul>

        <input id="updateButton" type="button" value="수정"/>
        <input id="deleteButton" type="button" value="삭제"/>
    </form>
  </div>
  <!-- /container -->

  <script th:inline="javascript">

    $('#submitButton').on('click',function() {
      const formData = new FormData();

      formData.append('name', $('#name').val());
      formData.append('url', $('#url').val());
      formData.append('businessLicenseNumber', $('#businessLicenseNumber').val());
      formData.append('email', $('#email').val());
      formData.append('operationStartTime', $('#operationStartTime').val());
      formData.append('operationEndTime', $('#operationEndTime').val());
      formData.append('lunchStartTime', $('#lunchStartTime').val());
      formData.append('lunchEndTime', $('#lunchEndTime').val());
      formData.append('closedDay', $('#closedDay').val());
      formData.append('companyCorporationName', $('#companyCorporationName').val());
      formData.append('representativeName', $('#representativeName').val());
      formData.append('businessLocation', $('#businessLocation').val());
      formData.append('customerServiceNumber', $('#customerServiceNumber').val());

      /*<![CDATA]*/
      var id = /*[[ ${store.id} ]]*/'';
      console.log(id);
      /*]]*/

      $.ajax({
        url: "/api/store/account/"+id,
        type: 'PATCH',
        cache: false,
        contentType: false,
        processData: false,
        enctype: 'multipart/form-data',
        data: formData,
        async: false,
      })
      location.href="/dashboard/caresitter"

      $('#deleteButton').on('click', function () {

          $.ajax({
              url: "/api/store/account/"+id,
              type: 'DELETE',
              cache: false,
              data: {
                  "id":id
              },
              dataType:"json",
              async: false,
          })

          location.href = "/store";
      })
  });

  </script>
</div>
</body>
</html>